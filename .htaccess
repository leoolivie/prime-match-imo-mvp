<IfModule mod_rewrite.c>
    RewriteEngine On

    # --- 1) Se alguém acessar /public direto, redireciona pra / ---
    RewriteCond %{THE_REQUEST} \s/+public/([^\s?]*) [NC]
    RewriteRule ^public/?(.*)$ /$1 [R=301,L]

    # --- 2) Proteções básicas ---
    RewriteRule ^\.env - [F,L]
    RewriteRule ^storage/ - [F,L]
    RewriteRule ^vendor/ - [F,L]

    # --- 3) Libera arquivos/pastas reais (ex.: .well-known) ---
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # --- 4) Tudo o que sobrar vai pro Laravel em /public ---
    RewriteRule ^ public/index.php [L]
</IfModule>